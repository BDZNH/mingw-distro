diff -aurN zlib-1.2.6/deflate.c zlib-1.2.6-fixed/deflate.c
--- zlib-1.2.6/deflate.c	2012-01-16 16:44:29 -0800
+++ zlib-1.2.6-fixed/deflate.c	2012-03-18 04:17:15 -0700
@@ -105,7 +105,7 @@
 /* Tail of hash chains */
 
 #ifndef TOO_FAR
-#  define TOO_FAR 4096
+#  define TOO_FAR 32767
 #endif
 /* Matches of length 3 are discarded if their distance exceeds TOO_FAR */
 
